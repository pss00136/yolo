<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="club">

<!-- club 등록 sql -->
<insert id = "clubInsert" parameterType="yolo.club.dto.ClubVO">
	INSERT INTO CLUB(c_num, c_type, c_title, c_tag, c_people, c_recruit, c_period, c_date, c_place, c_content, c_confirm, c_regdate) 
	VALUES( concat('c_', CLUB_NO_SEQ.nextval), #{c_type}, #{c_title}, #{c_tag}, #{c_people}, #{c_recruit}, #{c_period}, #{c_date}, #{c_place}, #{c_content}, 'n', sysdate )
</insert>
<insert id = "clubimgInsert" parameterType="yolo.club.dto.ClubImageVO">
	<selectKey keyColumn="c_num" keyProperty="c_num" order="BEFORE" resultType='string'>
         SELECT concat('c_',CLUB_NO_SEQ.currval) FROM dual
	</selectKey>
	INSERT INTO CLUBIMAGE (CIMG_NUM , C_NUM , CIMG_PATH , CIMG_NAME) 
	VALUES(concat('cimg_', CLUBIMAGE_NO_SEQ.nextval), #{c_num}, #{cimg_path}, #{cimg_name})
</insert>

<!-- club List 출력 sql -->
<select id = "clublistview" resultType="yolo.club.dto.ClubListVO">
	SELECT C.C_NUM C_NUM, I.CIMG_NAME CIMG_NAME, C.C_TYPE C_TYPE, C.C_TITLE C_TITLE, C.c_people c_people, C.C_PERIOD C_PERIOD, C.C_DATE C_DATE, C.C_PLACE C_PLACE
	FROM CLUB C JOIN CLUBIMAGE I
	ON c.c_num = i.c_num
</select>

<select id="clubdetail" parameterType="yolo.club.dto.ClubListVO" resultType="yolo.club.dto.ClubListVO">
	SELECT C.C_NUM C_NUM, I.CIMG_NAME CIMG_NAME, C.C_TYPE C_TYPE, C.C_TITLE C_TITLE, C.c_people c_people, C.C_PERIOD C_PERIOD, C.C_DATE C_DATE, C.C_PLACE C_PLACE
	FROM CLUB C JOIN CLUBIMAGE I
	ON c.c_num = i.c_num
</select>


</mapper>